# WandB Sweep Configuration for RDBLearn Experiments
# Usage: wandb sweep config/sweep_config.yaml

command:                                                                                          
    - uv                                                                                            
    - run
    - --no-sync                                                                                           
    - python                                                                                        
    - ${program}                                                                                    
    - ${args}                                                                                       
program: scripts/run_sweep_experiment.py 
method: grid  # Exhaustive grid search (use 'random' or 'bayes' for hyperparameter tuning)

metric:
  name: metric/test_score
  goal: maximize

parameters:
  # Model configuration pair name
  model_config_pair:
    values:
      - "tabpfn_v2"
      - "tabpfn_v2.5"
      - "limix"

  # Data pair in format "adapter_type::dataset_name::task_name"
  # adapter_type: "4dbinfer" or "relbench"
  # dataset_name: name of the dataset (e.g., "stackexchange", "rel-amazon")
  # task_name: name of the task within the dataset
  #   - Note: Unlike the old format, 4dbinfer now uses task names instead of paths
  #   - Tasks are loaded via RDBDataset.from_4dbinfer() or RDBDataset.from_relbench()
  data_pair:
    values:
      # relbench: rel-amazon (4 tasks)
      - "relbench::rel-amazon::item-churn"
      - "relbench::rel-amazon::item-ltv"
      - "relbench::rel-amazon::user-churn"
      - "relbench::rel-amazon::user-ltv"
      # relbench: rel-avito (3 tasks)
      - "relbench::rel-avito::ad-ctr"
      - "relbench::rel-avito::user-clicks"
      - "relbench::rel-avito::user-visits"
      # relbench: rel-event (3 tasks)
      - "relbench::rel-event::user-attendance"
      - "relbench::rel-event::user-ignore"
      - "relbench::rel-event::user-repeat"
      # relbench: rel-hm (2 tasks)
      - "relbench::rel-hm::item-sales"
      - "relbench::rel-hm::user-churn"
      # relbench: rel-stack (3 tasks)
      - "relbench::rel-stack::post-votes"
      - "relbench::rel-stack::user-badge"
      - "relbench::rel-stack::user-engagement"
      # relbench: rel-trial (3 tasks)
      - "relbench::rel-trial::site-success"
      - "relbench::rel-trial::study-adverse"
      - "relbench::rel-trial::study-outcome"
      # 4dbinfer datasets (use task name, not path - loaded via RDBDataset.from_4dbinfer)
      - "4dbinfer::outbrain-small::ctr"
      - "4dbinfer::amazon::churn"
      - "4dbinfer::retailrocket::cvr"
      - "4dbinfer::stackexchange::churn"
      - "4dbinfer::stackexchange::upvote"

  # Whether to use DFS feature engineering
  use_dfs:
    values:
      - true

  # Optional: additional parameters exposed by the new script
  max_train_samples:
    value: 10000
  dfs_max_depth:
    values:
      - 2
      - 3
      - 4

# Optional: Early termination for failing runs
# early_terminate:
#   type: hyperband
#   min_iter: 3
